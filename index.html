<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="IndieTachado | Directorio de VTubers indie hispanas destacadas. Peque√±as vs Gigantes üêª vs ü¶à">
    <title>IndieTachado | Phee & Friends Edition</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Luckiest+Guy&family=Montserrat:wght@400;700;800&display=swap" rel="stylesheet">

    <style>
        :root {
            --bg-dark: #121212;
            --card-bg: #1e1e1e;
            --twitch-purple: #9146FF;
            --banned-red: #ff0000;
            --neon-yellow: #ffff4d;
            --live-green: #00ff7b;
            --text-white: #f5f5f5;
            --text-gray: #cccccc;
            --transition: all 0.3s ease;
        }

        *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

        html {
            scroll-padding-top: 200px;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-white);
            overflow-x: hidden;
            line-height: 1.6;
        }

        header {
            position: fixed;
            top: 0; left: 0; width: 100%;
            background: rgba(18, 18, 18, 0.98);
            backdrop-filter: blur(10px);
            z-index: 1000;
            padding: 20px;
            border-bottom: 3px solid var(--twitch-purple);
            text-align: center;
        }

        .logo-box { position: relative; display: inline-block; }

        .glider-icon {
            width: 60px;
            fill: var(--twitch-purple);
            filter: drop-shadow(0 0 10px var(--twitch-purple));
        }

        .x-over {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            font-family: 'Luckiest Guy', cursive;
            font-size: 100px;
            color: var(--banned-red);
            text-shadow: 0 0 20px black;
            line-height: 0;
            pointer-events: none;
        }

        .main-title {
            font-family: 'Luckiest Guy', cursive;
            font-size: 3rem;
            margin-top: 10px;
        }

        .main-title span { color: var(--banned-red); }

        header p { margin-top: 8px; opacity: 0.9; }

        .search-area {
            max-width: 800px;
            margin: 30px auto 40px;
            padding: 0 20px;
            position: relative;
            z-index: 999;
        }

        .search-input {
            width: 100%;
            padding: 18px 30px;
            border-radius: 50px;
            border: 2px solid #333;
            background: var(--card-bg);
            color: white;
            font-size: 1.2rem;
            outline: none;
            transition: var(--transition);
        }

        .search-input:focus {
            border-color: var(--twitch-purple);
            box-shadow: 0 0 20px rgba(145, 70, 255, 0.4);
        }

        .live-counter {
            text-align: center;
            font-size: 1.4rem;
            margin: 20px 0 10px;
            color: var(--live-green);
            font-weight: 800;
            text-shadow: 0 0 10px var(--live-green);
            display: none;
        }

        main { min-height: 60vh; }

        .vtuber-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 400px));
            gap: 40px;
            justify-content: center;
            padding: 20px;
        }

        .card {
            background: var(--card-bg);
            border-radius: 30px;
            padding: 30px;
            text-align: center;
            border: 2px solid #2a2a2a;
            transition: var(--transition);
        }

        .card:hover {
            transform: scale(1.05) translateY(-5px);
            border-color: var(--twitch-purple);
            box-shadow: 0 15px 40px rgba(145, 70, 255, 0.2);
        }

        .avatar-frame {
            width: 220px;
            height: 220px;
            margin: 0 auto 20px;
        }

        .avatar-frame img {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: cover;
            border: 5px solid var(--twitch-purple);
            background: #333;
        }

        .name {
            font-family: 'Luckiest Guy', cursive;
            color: var(--neon-yellow);
            font-size: 2rem;
            margin-bottom: 10px;
            text-shadow: 0 0 10px rgba(255, 255, 77, 0.3);
        }

        .badges { margin-bottom: 15px; }

        .badge {
            display: inline-block;
            padding: 6px 14px;
            border-radius: 8px;
            font-size: 0.85rem;
            font-weight: 800;
            margin: 4px;
            color: black;
        }

        .b-indie { background: var(--banned-red); color: white; }
        .b-es { background: #00d4ff; }
        .b-live { 
            background: var(--live-green); 
            animation: livePulse 2s infinite ease-in-out;
            box-shadow: 0 0 10px var(--live-green);
        }

        .live-info {
            margin: 15px 0;
            font-size: 1rem;
            color: var(--live-green);
            font-weight: bold;
            transition: height 0.3s ease, margin 0.3s ease;
        }

        .live-info:empty {
            height: 0;
            margin: 0;
        }

        .bio {
            color: var(--text-gray);
            margin-bottom: 25px;
            font-style: italic;
        }

        .btn-twitch {
            display: inline-block;
            background: var(--twitch-purple);
            color: white;
            text-decoration: none;
            padding: 15px 30px;
            border-radius: 15px;
            font-weight: 800;
            transition: var(--transition);
        }

        .btn-twitch:hover {
            background: #b180ff;
            transform: translateY(-3px);
        }

        .no-results {
            grid-column: 1 / -1;
            text-align: center;
            font-size: 1.4rem;
            color: #888;
            padding: 60px 20px;
        }

        @keyframes livePulse {
            0%, 100% { transform: scale(1); box-shadow: 0 0 10px var(--live-green); }
            50% { transform: scale(1.1); box-shadow: 0 0 20px var(--live-green); }
        }

        footer {
            text-align: center;
            padding: 80px 20px 40px;
            opacity: 0.7;
            font-size: 0.9rem;
        }

        @media (max-width: 480px) {
            html { scroll-padding-top: 240px; }
            .main-title { font-size: 2.2rem; }
            .search-area { margin: 20px auto 30px; }
            .vtuber-grid { gap: 30px; padding: 10px; }
        }
    </style>
</head>
<body>

    <header>
        <div class="logo-box">
            <svg class="glider-icon" viewBox="0 0 24 24" aria-hidden="true">
                <path d="M11.571 4.714h1.715v5.143H11.57zm4.715 0H18v5.143h-1.714zM6 0L1.714 4.286v15.428h5.143V24l4.286-4.286h3.428L22.286 12V0zm14.571 11.143l-3.428 3.428h-3.429l-3 3v-3H6.857V1.714h13.714Z"/>
            </svg>
            <div class="x-over" aria-hidden="true">X</div>
        </div>
        <h1 class="main-title">INDIE<span>TACHADO</span></h1>
        <p>Peque√±as vs Gigantes üêª vs ü¶à</p>
    </header>

    <div class="search-area">
        <label for="search" class="visually-hidden">Buscar VTuber</label>
        <input type="text" id="search" class="search-input" placeholder="Busca por nombre, bio o usuario..." aria-label="Buscar VTuber">
    </div>

    <div class="live-counter" id="liveCounter"></div>

    <main>
        <section class="vtuber-grid" id="grid" aria-live="polite"></section>
    </main>

    <footer>
        <p>Hecho con ‚ù§Ô∏è por la comunidad indie hispana ‚Äì 2026</p>
    </footer>

    <script>
        const indies = [
            { name: "PheeTea", user: "pheeteavt", bio: "Te cuento un cuento antes de dormir ‚òï‚ùÄ" },
            { name: "Empanad√≠sima", user: "empanadisima_", bio: "Empanadas, vibes y caos total ü•üüî•" },
            { name: "YaeMomo", user: "yaemomo", bio: "Kitsune albina traviesa robando Cheetos y causando caos ‚ú®ü¶ä" },
            { name: "Kiran", user: "kiranvt_", bio: "Vibes misteriosas, juegos y caos indie üïπÔ∏è‚ú®" } // ¬°Cambia la bio por la oficial!
        ];

        const grid = document.getElementById('grid');
        const searchInput = document.getElementById('search');
        const liveCounter = document.getElementById('liveCounter');

        let cards = [];

        async function getUptime(user) {
            try { const res = await fetch(`https://decapi.me/twitch/uptime/${user}`); return await res.text(); }
            catch { return "offline"; }
        }

        async function getViewers(user) {
            try { const res = await fetch(`https://decapi.me/twitch/viewercount/${user}`); return await res.text(); }
            catch { return "0"; }
        }

        async function getTitle(user) {
            try { const res = await fetch(`https://decapi.me/twitch/title/${user}`); return await res.text(); }
            catch { return ""; }
        }

        function createCards(query = '') {
            grid.innerHTML = '';
            cards = [];

            const filter = query.trim().toLowerCase();
            let filtered = indies.filter(indie =>
                indie.name.toLowerCase().includes(filter) ||
                indie.bio.toLowerCase().includes(filter) ||
                indie.user.toLowerCase().includes(filter)
            );

            if (filtered.length === 0) {
                grid.innerHTML = '<p class="no-results">No se encontraron resultados üò¢<br>Prueba con otro t√©rmino.</p>';
                return;
            }

            filtered.forEach((indie, index) => {
                const customImg = `images/${indie.user}-avatar.png`;
                const twitchImg = `https://static-cdn.jtvnw.net/jtv_user_pictures/${indie.user}-profile_image-300x300.png`;
                const backupImg = `https://api.dicebear.com/7.x/adventurer/svg?seed=${indie.user}&backgroundColor=9146FF`;

                const card = document.createElement('div');
                card.className = 'card';
                card.style.animationDelay = `${index * 0.1}s`;
                card.innerHTML = `
                    <div class="avatar-frame">
                        <img src="${customImg}" alt="Avatar de ${indie.name}" loading="lazy"
                             onerror="this.onerror=null; this.src='\( {twitchImg}'; this.onerror=null; this.src=' \){backupImg}';">
                    </div>
                    <h2 class="name">${indie.name}</h2>
                    <div class="badges" aria-label="Etiquetas">
                        <span class="badge b-indie">INDIE</span>
                        <span class="badge b-es">ES</span>
                        <span class="badge b-live" id="live-badge-${indie.user}" style="display:none;">EN VIVO</span>
                    </div>
                    <div class="live-info" id="live-info-${indie.user}"></div>
                    <p class="bio">${indie.bio}</p>
                    <a href="https://twitch.tv/${indie.user}" target="_blank" rel="noopener" class="btn-twitch">Ver en Twitch</a>
                `;
                grid.appendChild(card);
                cards.push({ card, indie });
            });
        }

        async function updateLiveStatuses() {
            let liveCount = 0;
            const liveFirst = [];
            const offline = [];

            for (const { indie } of cards) {
                const uptimeText = await getUptime(indie.user);
                const isLive = !uptimeText.toLowerCase().includes('offline') && !uptimeText.includes('not found');

                const badge = document.getElementById(`live-badge-${indie.user}`);
                const info = document.getElementById(`live-info-${indie.user}`);

                if (isLive) {
                    liveCount++;
                    badge.style.display = 'inline-block';

                    const viewers = await getViewers(indie.user);
                    const title = await getTitle(indie.user);

                    info.innerHTML = `
                        <strong>${title || 'En directo'}</strong><br>
                        üë• ${viewers} viewers | ‚è∞ ${uptimeText}
                    `;
                    liveFirst.push({ indie });
                } else {
                    badge.style.display = 'none';
                    info.innerHTML = '';
                    offline.push({ indie });
                }
            }

            if (liveCount > 0) {
                liveCounter.textContent = `\( {liveCount} indie \){liveCount > 1 ? 's' : ''} en vivo ahora üî•`;
                liveCounter.style.display = 'block';

                liveFirst.concat(offline).forEach(item => {
                    const cardEl = cards.find(c => c.indie.user === item.indie.user).card;
                    grid.prepend(cardEl);
                });
            } else {
                liveCounter.style.display = 'none';
            }
        }

        searchInput.addEventListener('input', (e) => {
            createCards(e.target.value);
            updateLiveStatuses();
        });

        createCards();
        updateLiveStatuses();
        setInterval(updateLiveStatuses, 60000);
    </script>

    <style>
        .visually-hidden {
            position: absolute;
            width: 1px; height: 1px;
            padding: 0; margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
    </style>
</body>
</html>
